/**
 * 操作ガイド：表示用コンテンツ定義
 * 役割（ADMIN / OWNER / ALL）でフィルタし、TOC と本文を生成します。
 * 手順の追加・変更はこのファイルを編集するだけで反映されます。
 */

export type GuideRole = "ADMIN" | "OWNER" | "ALL";

export interface GuideSubsection {
    id: string;
    title: string;
    steps: string[];
}

export interface GuideSection {
    id: string;
    title: string;
    /** 表示対象ロール。ALL は管理者・代表者どちらにも表示 */
    role: GuideRole;
    subsections: GuideSubsection[];
}

export const guideSections: GuideSection[] = [
    {
        id: "intro",
        title: "はじめに",
        role: "ALL",
        subsections: [
            {
                id: "intro-welcome",
                title: "このガイドについて",
                steps: [
                    "管理画面の操作に慣れていない方向けのガイドです。",
                    "左の目次から知りたい項目を選ぶと、該当する説明に移動できます。",
                    "管理者アカウントでログインしている場合のみ、画面上部で「管理者向け」「クラブ代表向け」を切り替えて、両方の説明を確認できます。クラブ代表でログインしている場合は、代表者向けの項目だけが表示されます。",
                ],
            },
        ],
    },
    {
        id: "dashboard",
        title: "ダッシュボード",
        role: "ALL",
        subsections: [
            {
                id: "dashboard-overview",
                title: "画面の見方",
                steps: [
                    "ログイン後、最初に表示されるのがダッシュボードです。",
                    "登録されているクラブ数・活動数・入会申請数などの概要を一覧で確認できます。",
                    "左メニューから各機能に移動し、日々の更新や確認を行ってください。",
                ],
            },
        ],
    },
    // ================== 管理者向け ==================
    {
        id: "clubs",
        title: "クラブ管理",
        role: "ADMIN",
        subsections: [
            {
                id: "clubs-list",
                title: "クラブ一覧・検索",
                steps: [
                    "左メニュー「Content Management」の「クラブ管理」をクリックします。",
                    "登録されている全クラブの一覧が表示されます。検索窓で名前や地域で絞り込めます。",
                    "一覧の「編集」またはクラブ名をクリックすると、そのクラブの編集画面に進みます。",
                ],
            },
            {
                id: "clubs-new-edit",
                title: "新規登録・編集の流れ",
                steps: [
                    "新規登録：一覧画面右上の「新規登録」ボタンから、フォームに必要項目（道場名・住所・練習日・連絡先など）を入力し、保存します。",
                    "画像：メイン画像・ロゴはドラッグ＆ドロップまたはクリックでアップロードできます。練習スケジュールや所在地情報も同じ編集画面内のタブで設定できます。",
                    "保存後、サイト上での表示用URL（スラッグ）は自動で付与されます。公開前に「サイトを確認する」で表示を確認することをおすすめします。",
                ],
            },
        ],
    },
    {
        id: "pickup-clubs",
        title: "注目クラブ（Pick Up Clubs）",
        role: "ADMIN",
        subsections: [
            {
                id: "pickup-how",
                title: "トップページの3枠の設定",
                steps: [
                    "左メニュー「Content Management」の「注目クラブ」を開きます。",
                    "トップページの「Pick Up Clubs」に表示するクラブを、左・中央・右の3枠で選びます。各枠はプルダウンでクラブを選択できます。未選択の枠は「新着3件」が表示されます。",
                    "選択が終わったら「保存」をクリックしてください。反映はすぐにサイトに表示されます。",
                ],
            },
        ],
    },
    {
        id: "activities",
        title: "活動・ニュース（普及・広報活動）",
        role: "ADMIN",
        subsections: [
            {
                id: "activities-list",
                title: "一覧・検索・フィルター",
                steps: [
                    "左メニュー「活動・ニュース」を開くと、レポート・イベント・ニュースの一覧が表示されます。",
                    "画面上部の検索窓でタイトル検索ができます。「全て」「Report」「Event」「News」のタブで種類を絞り込めます。",
                    "地域・都道府県で絞り込むフィルターもあり、該当クラブの活動だけを確認するときに便利です。",
                ],
            },
            {
                id: "activities-new-edit",
                title: "新規登録・編集",
                steps: [
                    "「新規登録」をクリックすると、種類（レポート / イベント / ニュース）を選ぶ画面になります。種類を選ぶと投稿フォームが開きます。",
                    "タイトル・本文・関連クラブ・日付・画像などを入力し、保存します。編集は一覧から該当記事をクリックして行います。",
                ],
            },
        ],
    },
    {
        id: "magazines",
        title: "広報誌データ",
        role: "ADMIN",
        subsections: [
            {
                id: "magazines-list",
                title: "一覧・検索・並び替え",
                steps: [
                    "左メニュー「広報誌データ」を開くと、登録済みの広報誌（表紙・PDF）の一覧が表示されます。",
                    "検索窓でタイトル検索、地域・都道府県フィルターで絞り込みができます。並び順は「地域順」「新着順」で切り替え可能です。",
                    "「新規登録」で新規誌を追加、一覧から各誌をクリックして編集・表紙画像やPDFの差し替えができます。",
                ],
            },
        ],
    },
    {
        id: "banners",
        title: "バナー広告（旗の画像）",
        role: "ADMIN",
        subsections: [
            {
                id: "banners-display-settings",
                title: "旗の表示設定（どこに何を出すか）",
                steps: [
                    "バナー管理ページの一番上にある「旗の表示設定」カードで、サイト上で旗をどう表示するかを設定します。コードは不要です。",
                    "「トップページ（HOME）の旗」「都道府県ページ上部の旗」「都道府県ページサイドバーの旗」の3ブロックそれぞれで、表示モード（すべて表示 / クラブのみ / スポンサーのみ / 混合）を選べます。",
                    "スポンサーについては「すべてのスポンサー」「高级スポンサーのみ」「低级スポンサーのみ」で絞り込みも可能です。変更後は「保存」を押すとすぐにサイトに反映されます。",
                ],
            },
            {
                id: "banners-list-drag",
                title: "バナー一覧とドラッグで並び替え",
                steps: [
                    "バナー一覧は「すべて」「クラブ」「スポンサー」のタブで切り替えできます。各バナーカードの左上に「≡ 数字」のバッジがあります。",
                    "【隠れた操作】この「≡ 数字」の部分をドラッグすると、バナーの表示順を変更できます。ドラッグして別のカードの位置にドロップすると、順序が保存され、サイト上の表示順が変わります。",
                    "カード右上の「有効/無効」をクリックすると、そのバナーを一時的に非表示にできます。削除はカード内の「削除」から行います。",
                ],
            },
            {
                id: "banners-new-edit",
                title: "新規登録・編集",
                steps: [
                    "「新規登録」から、バナー名・画像・リンク先URL・カテゴリ（クラブ/スポンサー）などを入力して保存します。",
                    "既存バナーは一覧のカードから「編集」をクリックして変更できます。画像だけ差し替えることも可能です。",
                ],
            },
        ],
    },
    {
        id: "prefecture-banners",
        title: "都道府県バナー",
        role: "ADMIN",
        subsections: [
            {
                id: "pref-banners-overview",
                title: "概要と並び順の切り替え",
                steps: [
                    "左メニュー「都道府県バナー」を開くと、各都道府県ページ用の Feature Banner 画像を管理できます。",
                    "【隠れた操作】一覧の並び順は「地域順」（北海道→沖縄）と「新着順」（更新日の新しい順）で切り替えできます。画面上部の「並び順」ボタンで切り替えてください。",
                    "各都道府県の行の「編集」から、その県用の画像をアップロード・変更できます。未設定の県はデフォルト画像が表示されます。",
                ],
            },
        ],
    },
    {
        id: "applications",
        title: "入会申請管理",
        role: "ALL",
        subsections: [
            {
                id: "applications-list",
                title: "申請一覧の確認",
                steps: [
                    "左メニューから「入会申請管理」を開きます。管理者は全クラブへの申請、代表者は自クラブへの申請のみ表示されます。",
                    "一覧で「未対応」「連絡済み」「完了」などの件数が確認でき、各行で申請内容（氏名・連絡先・希望クラブ・メッセージ）を確認できます。",
                ],
            },
            {
                id: "applications-status",
                title: "ステータス変更（対応状況の更新）",
                steps: [
                    "【隠れた操作】各申請の行にあるステータス用のプルダウンで、「未対応」「連絡済み」「完了」「キャンセル (Rejected)」を選択できます。",
                    "選択すると自動で保存され、一覧の集計数字も更新されます。問い合わせ対応の進捗管理に利用してください。",
                ],
            },
        ],
    },
    {
        id: "inquiries",
        title: "お問い合わせ",
        role: "ADMIN",
        subsections: [
            {
                id: "inquiries-list",
                title: "問い合わせ一覧の確認",
                steps: [
                    "左メニュー「お問い合わせ」を開くと、サイトのコンタクトフォームから届いたお問い合わせが一覧で表示されます。",
                    "送信者名・メールアドレス・内容・日時を確認し、必要に応じてメールソフトなどで返信してください。",
                ],
            },
        ],
    },
    // ================== 代表者向け ==================
    {
        id: "my-club",
        title: "クラブ情報編集",
        role: "OWNER",
        subsections: [
            {
                id: "my-club-edit",
                title: "自分のクラブ情報を更新する",
                steps: [
                    "左メニュー「My Club」の「クラブ情報編集」をクリックします。自分が代表として紐づいているクラブの編集画面が開きます。",
                    "道場名・住所・練習日・連絡先・紹介文などをフォームで編集できます。画像はドラッグ＆ドロップまたはクリックで差し替え可能です。",
                    "練習スケジュールや所在地（マップ用）も同じ画面内のセクションで設定できます。変更後は「保存」を押して反映してください。",
                ],
            },
        ],
    },
    {
        id: "settings",
        title: "設定",
        role: "ADMIN",
        subsections: [
            {
                id: "settings-account",
                title: "アカウント・チーム設定",
                steps: [
                    "左メニュー「System」の「設定」をクリックします。",
                    "「マイプロフィール」で表示名を変更、「セキュリティ」でパスワードを変更できます。",
                    "管理者のみ「チームメンバー追加」で新しい管理者アカウント（メール・パスワード）を作成できます。作成されたアカウントは特権管理者として扱われるため、慎重に操作してください。",
                ],
            },
        ],
    },
];

/** 指定ロールで表示するセクションだけに絞る */
export function getSectionsForRole(role: "ADMIN" | "OWNER"): GuideSection[] {
    return guideSections.filter(
        (s) => s.role === "ALL" || s.role === role
    );
}
